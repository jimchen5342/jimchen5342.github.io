<!DOCTYPE html>
<html>
  <head>
    <title>test</title>
    <meta charset="utf-8">
  	<meta http-equiv="cache-control" content="no-cache">
	  <meta http-equiv="expires" content="0">

		<script type="text/javascript" src="https://code.jquery.com/jquery-1.9.1.min.js"></script>	
		<script src="./jQuery/fabric.min.js"></script>
  </head>	
<body>
	<canvas id="c" width="600" height="300">
  </canvas>
</body>
<script>
	//hljs.initHighlightingOnLoad();
	$(document).ready(function() {
		var canvas = new fabric.Canvas('c', {
			selection: false
		});

		var line, isDown;

		canvas.on('mouse:down', function(o) {
			isDown = true;
			var pointer = canvas.getPointer(o.e);
			var points = [pointer.x, pointer.y, pointer.x, pointer.y];
			line = new fabric.Line(points, {
				strokeWidth: 5,
				fill: 'red',
				stroke: 'red',
				originX: 'center',
				originY: 'center'
			});
			canvas.add(line);
		});

		canvas.on('mouse:move', function(o) {
			if (!isDown) return;
			var pointer = canvas.getPointer(o.e);
			line.set({
				x2: pointer.x,
				y2: pointer.y
			});
			canvas.renderAll();
		});

		canvas.on('mouse:up', function(o) {
			isDown = false;
		});
	});
</script>
</html>